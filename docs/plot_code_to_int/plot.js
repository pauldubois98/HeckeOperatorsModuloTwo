var rotate = 0;

var data = [
[1,3,9,11,33,35,41,43,129,131,137,139,161,163,169,171,513,515,521,523,545,547,553,555,641,643,],
[5,7,13,15,37,39,45,47,133,135,141,143,165,167,173,175,517,519,525,527,549,551,557,559,645,647,],
[17,19,25,27,49,51,57,59,145,147,153,155,177,179,185,187,529,531,537,539,561,563,569,571,657,659,],
[21,23,29,31,53,55,61,63,149,151,157,159,181,183,189,191,533,535,541,543,565,567,573,575,661,663,],
[65,67,73,75,97,99,105,107,193,195,201,203,225,227,233,235,577,579,585,587,609,611,617,619,705,707,],
[69,71,77,79,101,103,109,111,197,199,205,207,229,231,237,239,581,583,589,591,613,615,621,623,709,711,],
[81,83,89,91,113,115,121,123,209,211,217,219,241,243,249,251,593,595,601,603,625,627,633,635,721,723,],
[85,87,93,95,117,119,125,127,213,215,221,223,245,247,253,255,597,599,605,607,629,631,637,639,725,727,],
[257,259,265,267,289,291,297,299,385,387,393,395,417,419,425,427,769,771,777,779,801,803,809,811,897,899,],
[261,263,269,271,293,295,301,303,389,391,397,399,421,423,429,431,773,775,781,783,805,807,813,815,901,903,],
[273,275,281,283,305,307,313,315,401,403,409,411,433,435,441,443,785,787,793,795,817,819,825,827,913,915,],
[277,279,285,287,309,311,317,319,405,407,413,415,437,439,445,447,789,791,797,799,821,823,829,831,917,919,],
[321,323,329,331,353,355,361,363,449,451,457,459,481,483,489,491,833,835,841,843,865,867,873,875,961,963,],
[325,327,333,335,357,359,365,367,453,455,461,463,485,487,493,495,837,839,845,847,869,871,877,879,965,967,],
[337,339,345,347,369,371,377,379,465,467,473,475,497,499,505,507,849,851,857,859,881,883,889,891,977,979,],
[341,343,349,351,373,375,381,383,469,471,477,479,501,503,509,511,853,855,861,863,885,887,893,895,981,983,],
[1025,1027,1033,1035,1057,1059,1065,1067,1153,1155,1161,1163,1185,1187,1193,1195,1537,1539,1545,1547,1569,1571,1577,1579,1665,1667,],
[1029,1031,1037,1039,1061,1063,1069,1071,1157,1159,1165,1167,1189,1191,1197,1199,1541,1543,1549,1551,1573,1575,1581,1583,1669,1671,],
[1041,1043,1049,1051,1073,1075,1081,1083,1169,1171,1177,1179,1201,1203,1209,1211,1553,1555,1561,1563,1585,1587,1593,1595,1681,1683,],
[1045,1047,1053,1055,1077,1079,1085,1087,1173,1175,1181,1183,1205,1207,1213,1215,1557,1559,1565,1567,1589,1591,1597,1599,1685,1687,],
[1089,1091,1097,1099,1121,1123,1129,1131,1217,1219,1225,1227,1249,1251,1257,1259,1601,1603,1609,1611,1633,1635,1641,1643,1729,1731,],
[1093,1095,1101,1103,1125,1127,1133,1135,1221,1223,1229,1231,1253,1255,1261,1263,1605,1607,1613,1615,1637,1639,1645,1647,1733,1735,],
[1105,1107,1113,1115,1137,1139,1145,1147,1233,1235,1241,1243,1265,1267,1273,1275,1617,1619,1625,1627,1649,1651,1657,1659,1745,1747,],
[1109,1111,1117,1119,1141,1143,1149,1151,1237,1239,1245,1247,1269,1271,1277,1279,1621,1623,1629,1631,1653,1655,1661,1663,1749,1751,],
[1281,1283,1289,1291,1313,1315,1321,1323,1409,1411,1417,1419,1441,1443,1449,1451,1793,1795,1801,1803,1825,1827,1833,1835,1921,1923,],
[1285,1287,1293,1295,1317,1319,1325,1327,1413,1415,1421,1423,1445,1447,1453,1455,1797,1799,1805,1807,1829,1831,1837,1839,1925,1927,],
];
var r = 2.25;
var a = 1.25*Math.PI;
var pos_x=Math.cos(a)*r;
var pos_y=Math.sin(a)*r;
var layout = {
    title: "code of integer z=[x,y]",
    autosize: false,
    width: 700,
    height: 700,
    scene: {camera: {eye: {x: pos_x, y: pos_y, z: 1.1}}},
};
Plotly.newPlot('chart',
    [{
        z: data,
        type: 'surface',
        colorscale: 'Electric',
    }],
    layout
);


function update () {
    a+=Math.PI*0.001
    pos_x=Math.cos(a)*r;
    pos_y=Math.sin(a)*r;

    Plotly.animate('chart', {
        layout: {
            title: "code of integer z=[x,y]",
            autosize: false,
            width: 700,
            height: 700,
            scene: {camera: {eye: {x: pos_x, y: pos_y, z: 1.1}}}}
        }, {
            transition: {
                duration: 0
            },
            frame: {
                duration: 0,
                redraw: true
            }
        }
    );
    
    if(rotate===1){
        requestAnimationFrame(update);
    }
}


document.getElementById("auto-rotate").onclick = function(){
    rotate = 1- rotate;
    requestAnimationFrame(update);
}
